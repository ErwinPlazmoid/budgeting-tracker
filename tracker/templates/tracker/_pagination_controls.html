<!-- Page size selector -->
<form method="get" class="page-size-form">
    <label for="page_size">Show:</label>
    <select name="page_size" id="page_size" onchange="this.form.submit()">
        <option value="10" {% if request.GET.page_size == '10' %}selected{% endif %}>10</option>
        <option value="20" {% if request.GET.page_size == '20' %}selected{% endif %}>20</option>
        <option value="50" {% if request.GET.page_size == '50' %}selected{% endif %}>50</option>
        <option value="100" {% if request.GET.page_size == '100' %}selected{% endif %}>100</option>
    </select>
    <!-- Preserve filters/sort in hidden inputs -->
    {% for key, value in request.GET.items %}
        {% if key != "page" and key != "page_size" %}
            <input type="hidden" name="{{ key }}" value="{{ value }}">
        {% endif %}
    {% endfor %}
</form>

<!-- Pagination navigation -->
{% if page_obj.paginator.num_pages > 1 %}
<div class="pagination-controls">
    {% if page_obj.has_previous %}
        <a href="?page=1&{{ querystring }}" class="btn">« First</a>
        <a href="?page={{ page_obj.previous_page_number }}&{{ querystring }}" class="btn">‹ Prev</a>
    {% endif %}

    <span class="page-info">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        (Showing {{ page_obj.start_index }}–{{ page_obj.end_index }} of {{ page_obj.paginator.count }})
    </span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}&{{ querystring }}" class="btn">Next ›</a>
        <a href="?page={{ page_obj.paginator.num_pages }}&{{ querystring }}" class="btn">Last »</a>
    {% endif %}
</div>
{% endif %}
